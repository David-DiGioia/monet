/*
The first two descriptor sets (for camera/scene data and object matrices) are common to all objects, so for the material we only describe the bindings to descriptor set 2
cubemap syntax:

cube:
material_to_sample_from
out_texture_name
out_texture_resolution
use_mip_map
vertex_shader_path
fragment_shader_path
END
*/

// We need this material in order to create the cubemap
name:	equirectangular
vert:	equirectangular.vert.spv
frag:	equirectangular.frag.spv
bind:	0
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
//	path:	../hdri/red_hill_curve_4k.hdr
	path:	../hdri/forest_slope_1k.hdr
	format:	R32G32B32A32_SFLOAT
END

// first create normal cubemap
cube:
equirectangular
cubemap
1024
false
equirect_to_cubemap.vert.spv
equirect_to_cubemap.frag.spv
END


// then create a material using that cubemap
name:	cubemap
vert:	cubemap.vert.spv
frag:	cubemap.frag.spv
bind:	0
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	cubemap
	format:	R32G32B32A32_SFLOAT
END

// now create the irradiance map sampling from the cubemap material we just made
cube:
cubemap
irradianceMap
512
false
cubemap_to_irradiance.vert.spv
cubemap_to_irradiance.frag.spv
END

// now create pre-filtered environment map
cube:
cubemap
prefilteredEnvironmentMap
256
true
cubemap_to_irradiance.vert.spv
BRDF_integration_map.frag.spv
END

// test any cubemap texture
name:	testCubemapMat
vert:	cubemap.vert.spv
frag:	cubemap.frag.spv
bind:	0
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	prefilteredEnvironmentMap
	format:	R32G32B32A32_SFLOAT
END

name:	default
vert:	pbr.vert.spv
frag:	pbr.frag.spv
// diffuse
bind:	0
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	_default/textures/_diff.png
	format:	R8G8B8A8_SRGB
// normal
bind:	1
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	_default/textures/_norm.png
	format:	R8G8B8A8_UNORM
// roughness
bind:	2
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	_default/textures/_roug.png
	format:	R8G8B8A8_UNORM
// ao
bind:	3
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	_default/textures/_ao__.png
	format:	R8G8B8A8_UNORM
// irradiance map
bind:	4
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	irradianceMap
	format:	R32G32B32A32_SFLOAT
END


name:	bed
vert:	pbr.vert.spv
frag:	pbr.frag.spv
// diffuse
bind:	0
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	bed/textures/GothicBed_01_8-bit_diff.png
	format:	R8G8B8A8_SRGB
// normal
bind:	1
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	bed/textures/GothicBed_01_8-bit_norm.png
	format:	R8G8B8A8_UNORM
// roughness
bind:	2
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	bed/textures/GothicBed_01_8-bit_roug.png
	format:	R8G8B8A8_UNORM
// ao
bind:	3
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	bed/textures/GothicBed_01_8-bit_ao__.png
	format:	R8G8B8A8_UNORM
// irradiance map
bind:	4
	type:	COMBINED_IMAGE_SAMPLER
	stage:	FRAGMENT
	path:	irradianceMap
	format:	R32G32B32A32_SFLOAT
END
